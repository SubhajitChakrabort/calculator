<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RCLD Staging Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    boxShadow: {
                        'neo': '10px 10px 30px #1a1a1a, -10px -10px 30px #262626',
                        'button': 'inset 4px 4px 8px rgba(0, 0, 0, 0.5)',
                    },
                    backgroundImage: {
                        'screen-glare': 'linear-gradient(145deg, rgba(255, 255, 255, 0.02) 0%, transparent 100%)',
                        'button-grad': 'linear-gradient(145deg, #2c2c2c, #1a1a1a)',
                        'operator-grad': 'linear-gradient(145deg, #3b82f6, #2563eb)',
                        'bracket-grad': 'linear-gradient(145deg, #4a5568, #2d3748)',
                        'special-grad': 'linear-gradient(145deg, #4c1d95, #2e1065)'
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-black m-0 p-0 h-screen w-screen overflow-hidden">
    <div class="h-screen w-full bg-black p-1 sm:p-2 md:p-4 flex flex-col shadow-neo overflow-hidden">
        <!-- Made at RCLD Text -->
        <div class="text-center mb-1 sm:mb-2 flex-shrink-0">
            <h1 class="text-white/70 text-base sm:text-lg md:text-xl lg:text-2xl font-mono font-black tracking-wider">Made at RCLD Islampur
            </h1>
        </div>

        <!-- Top Bar -->
        <div
            class="w-16 md:w-24 h-1 md:h-1.5 bg-gradient-to-r from-transparent via-gray-500 to-transparent rounded-full mx-auto mb-1 sm:mb-2 flex-shrink-0">
        </div>

        <!-- Display Screen -->
        <div
            class="flex-1 flex flex-col justify-end mb-2 sm:mb-3 rounded-2xl bg-gradient-to-br from-white/5 to-white/2 p-1 min-h-0">
            <div class="bg-black rounded-2xl p-2 sm:p-3 md:p-4 relative h-full flex flex-col">
                <!-- History Section -->
                <div class="mb-2 sm:mb-3 flex-shrink-0 h-6 sm:h-8 md:h-10 overflow-y-auto">
                    <div class="font-mono text-sm sm:text-base md:text-lg font-bold text-white/60"
                        id="calculationHistory"></div>
                </div>

                <!-- Input Display Section (White Text) -->
                <div class="relative mb-2 sm:mb-3 flex-shrink-0">
                    <input type="text" id="input"
                        class="w-full h-8 sm:h-10 md:h-12 bg-transparent text-white text-right text-3xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-black font-mono tracking-wider focus:outline-none"
                        readonly>
                </div>

                <!-- Result Display Section (Cyan Text) -->
                <div class="relative flex-1 flex items-end justify-end min-h-0">
                    <div id="result"
                        class="w-full bg-transparent text-cyan-400 text-right text-6xl sm:text-7xl md:text-8xl lg:text-9xl xl:text-[12rem] font-black font-mono tracking-wider flex items-end justify-end leading-none relative top-[-5px] sm:top-0">
                        0</div>
                </div> 
            </div>
        </div>

        <!-- Calculator Buttons Container -->
        <div class="flex-shrink-0 pb-1 sm:pb-2">
            <!-- Main Button Grid -->
            <div class="grid grid-cols-4 gap-2 sm:gap-3 md:gap-4 max-w-sm sm:max-w-md md:max-w-lg mx-auto px-2 relative top-[-10px] sm:top-0">

                <!-- First Row: C and ⌫ -->
                <button
                    class="btn h-16 sm:h-20 md:h-24 lg:h-28 bg-special-grad text-white rounded-xl text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black transform transition-all hover:scale-105 active:shadow-button col-span-2">C</button>
                <button
                    class="btn h-16 sm:h-20 md:h-24 lg:h-28 bg-special-grad text-white rounded-xl text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black transform transition-all hover:scale-105 active:shadow-button col-span-2">⌫</button>

                <!-- Second Row: ( ) % ÷ -->
                <button
                    class="btn h-16 sm:h-20 md:h-24 lg:h-28 bg-bracket-grad text-white rounded-xl text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black transform transition-all hover:scale-105 active:shadow-button">(</button>
                <button
                    class="btn h-16 sm:h-20 md:h-24 lg:h-28 bg-bracket-grad text-white rounded-xl text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black transform transition-all hover:scale-105 active:shadow-button">)</button>
                <button
                    class="btn h-16 sm:h-20 md:h-24 lg:h-28 bg-operator-grad text-white rounded-xl text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black transform transition-all hover:scale-105 active:shadow-button">%</button>
                <button
                    class="btn h-16 sm:h-20 md:h-24 lg:h-28 bg-operator-grad text-white rounded-xl text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black transform transition-all hover:scale-105 active:shadow-button flex items-center justify-center"
                    data-value="/">
                    <span class="flex flex-col items-center justify-center leading-none -space-y-4 sm:-space-y-5 md:-space-y-6">
                        <span class="text-lg sm:text-xl md:text-2xl lg:text-3xl">•</span>
                        <span class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black">—</span>
                        <span class="text-lg sm:text-xl md:text-2xl lg:text-3xl">•</span>
                    </span>
                </button>

                <!-- Third Row: 7 8 9 × -->
                <button
                    class="btn h-16 sm:h-20 md:h-24 lg:h-28 bg-button-grad text-white rounded-xl text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black transform transition-all hover:scale-105 active:shadow-button">7</button>
                <button
                    class="btn h-16 sm:h-20 md:h-24 lg:h-28 bg-button-grad text-white rounded-xl text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black transform transition-all hover:scale-105 active:shadow-button">8</button>
                <button
                    class="btn h-16 sm:h-20 md:h-24 lg:h-28 bg-button-grad text-white rounded-xl text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black transform transition-all hover:scale-105 active:shadow-button">9</button>
                <button
                    class="btn h-16 sm:h-20 md:h-24 lg:h-28 bg-operator-grad text-white rounded-xl text-3xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-black transform transition-all hover:scale-105 active:shadow-button">×</button>

                <!-- Fourth Row: 4 5 6 - -->
                <button
                    class="btn h-16 sm:h-20 md:h-24 lg:h-28 bg-button-grad text-white rounded-xl text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black transform transition-all hover:scale-105 active:shadow-button">4</button>
                <button
                    class="btn h-16 sm:h-20 md:h-24 lg:h-28 bg-button-grad text-white rounded-xl text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black transform transition-all hover:scale-105 active:shadow-button">5</button>
                <button
                    class="btn h-16 sm:h-20 md:h-24 lg:h-28 bg-button-grad text-white rounded-xl text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black transform transition-all hover:scale-105 active:shadow-button">6</button>
                <button
                    class="btn h-16 sm:h-20 md:h-24 lg:h-28 bg-operator-grad text-white rounded-xl text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl font-black transform transition-all hover:scale-105 active:shadow-button leading-none">-</button>

                <!-- Fifth Row: 1 2 3 + -->
                <button
                    class="btn h-16 sm:h-20 md:h-24 lg:h-28 bg-button-grad text-white rounded-xl text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black transform transition-all hover:scale-105 active:shadow-button">1</button>
                <button
                    class="btn h-16 sm:h-20 md:h-24 lg:h-28 bg-button-grad text-white rounded-xl text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black transform transition-all hover:scale-105 active:shadow-button">2</button>
                <button
                    class="btn h-16 sm:h-20 md:h-24 lg:h-28 bg-button-grad text-white rounded-xl text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black transform transition-all hover:scale-105 active:shadow-button">3</button>
                <button
                    class="btn h-16 sm:h-20 md:h-24 lg:h-28 bg-operator-grad text-white rounded-xl text-3xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-black transform transition-all hover:scale-105 active:shadow-button">+</button>

                <!-- Sixth Row: +/- 0 . = -->
                <button
                    class="btn h-16 sm:h-20 md:h-24 lg:h-28 bg-button-grad text-white rounded-xl text-lg sm:text-xl md:text-2xl lg:text-3xl xl:text-4xl font-black transform transition-all hover:scale-105 active:shadow-button">+/-</button>
                <button
                    class="btn h-16 sm:h-20 md:h-24 lg:h-28 bg-button-grad text-white rounded-xl text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black transform transition-all hover:scale-105 active:shadow-button">0</button>
                <button
                    class="btn h-16 sm:h-20 md:h-24 lg:h-28 bg-button-grad text-white rounded-xl text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black transform transition-all hover:scale-105 active:shadow-button">.</button>
                <button
                    class="btn h-16 sm:h-20 md:h-24 lg:h-28 bg-operator-grad text-white rounded-xl text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black transform transition-all hover:scale-105 active:shadow-button">=</button>
            </div>
        </div>
    </div>

    <script>
        const input = document.getElementById('input');
        const result = document.getElementById('result');
        const calculationHistory = document.getElementById('calculationHistory');
        const buttons = document.querySelectorAll('.btn');
        let currentInput = '';
        let calculations = [];
        let shouldResetOnNextNumber = false;
        let lastResult = null;
        let justCalculated = false;

        function updateCalculationHistory() {
            calculations = calculations.slice(-3);
            calculationHistory.innerHTML = calculations.map(calc =>
                `<div class="mb-1 text-right p-1 border-b border-white/10 text-xs">${calc.input} = ${calc.result}</div>`
            ).join('');
        }

        function isValidInput(current, newValue) {
            if (newValue === '.') {
                const numbers = current.split(/[+\-×/*]/);
                const currentNumber = numbers[numbers.length - 1];
                if (currentNumber.includes('.')) return false;
            }

            if (['+', '-', '×', '/'].includes(newValue)) {
                const lastChar = current.slice(-1);
                if (['+', '-', '×', '/', '*'].includes(lastChar)) return false;
            }

            return true;
        }

        function evaluateExpression(expr) {
            try {
                // Handle implicit multiplication like 5(5+6) -> 5*(5+6)
                expr = expr.replace(/(\d)\(/g, '$1*(');
                expr = expr.replace(/\)(\d)/g, ')*$1');
                expr = expr.replace(/×/g, '*');
                return eval(expr);
            } catch (error) {
                return 'Error';
            }
        }

        function updateLiveCalculation() {
            try {
                if (currentInput && currentInput !== '') {
                    // Only show live calculation if there's an operator and we're not in the middle of typing a number
                    const hasOperator = /[+\-×/*]/.test(currentInput);
                    const endsWithOperator = /[+\-×/*]$/.test(currentInput);

                    if (hasOperator && !endsWithOperator) {
                        const tempResult = evaluateExpression(currentInput);
                        if (tempResult !== 'Error' && !isNaN(tempResult) && isFinite(tempResult)) {
                            result.textContent = tempResult;
                            lastResult = tempResult;
                            // Only set reset flag if we're showing a live result, not while typing
                            shouldResetOnNextNumber = false;
                        } else {
                            result.textContent = currentInput || '0';
                            shouldResetOnNextNumber = false;
                        }
                    } else {
                        result.textContent = currentInput || '0';
                        shouldResetOnNextNumber = false;
                    }
                } else {
                    result.textContent = '0';
                    shouldResetOnNextNumber = false;
                }
            } catch {
                result.textContent = currentInput || '0';
                shouldResetOnNextNumber = false;
            }
        }

        function isOperator(value) {
            return ['+', '-', '×', '/', '*'].includes(value);
        }

        function isNumber(value) {
            return /^[0-9]$/.test(value);
        }

        function replaceLastOperator(input, newOperator) {
            if (!input) return input;
            const lastChar = input.slice(-1);
            if (isOperator(lastChar)) {
                return input.slice(0, -1) + (newOperator === '×' ? '*' : newOperator);
            }
            return input;
        }

        buttons.forEach(button => {
            button.addEventListener('click', () => {
                let actualValue = button.getAttribute('data-value') || button.textContent.trim();

                switch (actualValue) {
                    case 'C':
                        currentInput = '';
                        result.textContent = '0';
                        shouldResetOnNextNumber = false;
                        lastResult = null;
                        justCalculated = false;
                        break;

                    case '⌫':
                        if (justCalculated) {
                            // If we just calculated, backspace should clear everything
                            currentInput = '';
                            justCalculated = false;
                        } else {
                            currentInput = currentInput.slice(0, -1);
                        }
                        shouldResetOnNextNumber = false;
                        updateLiveCalculation();
                        break;

                    case '=':
                        try {
                            if (currentInput) {
                                const finalResult = evaluateExpression(currentInput);
                                if (finalResult !== 'Error' && !isNaN(finalResult) && isFinite(finalResult)) {
                                    calculations.push({
                                        input: currentInput,
                                        result: finalResult
                                    });
                                    updateCalculationHistory();
                                    currentInput = finalResult.toString();
                                    result.textContent = finalResult;
                                    shouldResetOnNextNumber = true;
                                    lastResult = finalResult;
                                    justCalculated = true;
                                } else {
                                    result.textContent = 'Error';
                                    currentInput = '';
                                    shouldResetOnNextNumber = false;
                                    justCalculated = false;
                                }
                            }
                        } catch {
                            result.textContent = 'Error';
                            currentInput = '';
                            shouldResetOnNextNumber = false;
                            justCalculated = false;
                        }
                        break;

                    case '+/-':
                        if (shouldResetOnNextNumber && lastResult !== null) {
                            currentInput = (-lastResult).toString();
                            shouldResetOnNextNumber = false;
                            justCalculated = false;
                        } else if (currentInput) {
                            // Find the last number in the expression
                            const lastNumberMatch = currentInput.match(/-?\d+\.?\d*$/);
                            if (lastNumberMatch) {
                                const lastNumber = lastNumberMatch[0];
                                const newNumber = (-parseFloat(lastNumber)).toString();
                                currentInput = currentInput.replace(/-?\d+\.?\d*$/, newNumber);
                            }
                        }
                        updateLiveCalculation();
                        break;

                    case '%':
                        if (shouldResetOnNextNumber && lastResult !== null) {
                            const percentResult = lastResult / 100;
                            currentInput = percentResult.toString();
                            shouldResetOnNextNumber = false;
                            justCalculated = false;
                        } else if (currentInput) {
                            try {
                                const percentResult = evaluateExpression(currentInput) / 100;
                                currentInput = percentResult.toString();
                            } catch {
                                result.textContent = 'Error';
                                break;
                            }
                        }
                        updateLiveCalculation();
                        break;

                    default:
                        if (isOperator(actualValue)) {
                            justCalculated = false;
                            // If we should reset but user pressed operator, continue with last result
                            if (shouldResetOnNextNumber && lastResult !== null) {
                                currentInput = lastResult.toString() + (actualValue === '×' ? '*' : actualValue);
                                shouldResetOnNextNumber = false;
                            } else if (currentInput && !isOperator(currentInput.slice(-1))) {
                                currentInput += actualValue === '×' ? '*' : actualValue;
                            } else if (currentInput && isOperator(currentInput.slice(-1))) {
                                currentInput = replaceLastOperator(currentInput, actualValue);
                            }
                            updateLiveCalculation();
                        } else if (isNumber(actualValue) || actualValue === '.') {
                            // Handle numbers and decimal point
                            if (shouldResetOnNextNumber && justCalculated) {
                                // Only reset if we just calculated with equals button
                                currentInput = actualValue;
                                shouldResetOnNextNumber = false;
                                justCalculated = false;
                            } else {
                                // Continue building the current number/expression
                                if (isValidInput(currentInput, actualValue)) {
                                    currentInput += actualValue;
                                }
                                // Reset flags when typing numbers normally
                                shouldResetOnNextNumber = false;
                                justCalculated = false;
                            }
                            updateLiveCalculation();
                        } else {
                            // Handle brackets and other characters
                            if (shouldResetOnNextNumber && justCalculated) {
                                if (actualValue === '(') {
                                    currentInput = actualValue;
                                    shouldResetOnNextNumber = false;
                                    justCalculated = false;
                                }
                            } else {
                                if (isValidInput(currentInput, actualValue)) {
                                    currentInput += actualValue;
                                }
                                shouldResetOnNextNumber = false;
                                justCalculated = false;
                            }
                            updateLiveCalculation();
                        }
                        break;
                }

                input.value = currentInput;
            });
        });

        // Initialize
        updateLiveCalculation();

        // Prevent scrolling on touch devices
        document.addEventListener('touchmove', function(e) {
            e.preventDefault();
        }, { passive: false });

        // Prevent scrolling with mouse wheel
        document.addEventListener('wheel', function(e) {
            e.preventDefault();
        }, { passive: false });

        // Prevent scrolling with keyboard
        document.addEventListener('keydown', function(e) {
            if(['Space', 'ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].indexOf(e.code) > -1) {
                e.preventDefault();
            }
        }, false);
    </script>
</body>

</html>


